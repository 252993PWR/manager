<script>
function randomPassword(length) {
    var chars = "abcdefghijklmnopqrstuvwxyz!@#$%^&*()-+<>ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
    var pass = "";
    for (var x = 0; x < length; x++) {
        var i = Math.floor(Math.random() * chars.length);
        pass += chars.charAt(i);
    }
    nums="1234567890";
    specs="!@#$%^&*()-+<>";
    big="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    small="abcdefghijklmnopqrstuvwxyz"
    var noNums=1;
    var noSpecs=1;
    var noSmalls=1;
    var noBigs=1;
    while (true) {
        for (var n = 0; n < nums.length; n++) {
            if (pass.includes(nums.charAt(n))) {
                noNums=0;
            }
        }
        for (var s = 0; s < specs.length; s++) {
            if (pass.includes(specs.charAt(s))) {
                noSpecs=0;
            }
        }
        for (var lw = 0; lw < small.length; lw++) {
            if (pass.includes(small.charAt(lw))) {
                noSmalls=0;
            }
        }
        for (var up = 0; up < big.length; up++) {
            if (pass.includes(big.charAt(up))) {
                noBigs=0;
            }
        }

        if (!noSmalls && !noBigs && !noNums && !noSpecs) {
            break;
        }
        else {
            pass=''
            for (var x = 0; x < length; x++) {
                var i = Math.floor(Math.random() * chars.length);
                pass += chars.charAt(i);
            }
        }
    }
    passInfo.savedPassword.value = pass;
}

</script>
{% block content %}
  {% if action == 'add' %}
    <form name="passInfo" action="/viewPass" method="POST">
      <p><b>Name:</b><input type="text" value="{{ passName }}" name="passName"/></p>
      <p><b>Username:</b><input type="text" value="{{ passUsername }}" name="passUsername"/></p>
      <p><b>Password:</b><input onLoad="randomPassword(12);" type="text" value="{{ savedPassword }}" name="savedPassword"/></p>
      <input type="button" class="button" value="Generate" onclick="randomPassword(12);" tabindex="2">
      <script>randomPassword(12);</script>
      <p><b>PageURL:</b><input type="text" value="{{ passPageURL }}" name="passPageURL"/></p>
      <p><b>Note:</b><input type="text" value="{{ passNote }}" name="passNote"/></p>
      <input hidden type="text" value="{{ passUUID }}" name="passUUID">
      <input hidden type="text" value="applyAdd" name="action">
      <input type="submit" value="Save password"/>
    </form>
  {% endif %}
{% endblock content %}
<form action="/home">
    <input type="submit" value="Back" />
</form>
